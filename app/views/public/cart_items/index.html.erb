カート内商品一覧画面(数量変更・カート削除の要素を含む)
ショッピングカート


<% @cart_items.each do |cart_item| %>
  <table class="table table-bordered w-50 "style="margin-left: 50px">
       <tr>
         <td class="col-4"></td>
         <td class="col-4"></td>
         <td class="col-4"></td>
         <td class="col-4"></td>
         <td class="col-4"><%= link_to 'カートを空にする', cart_items_destroy_all_path(cart_item.id), method: :delete %></td>
     </tr>
     <tr>
         <td class="col-4">商品名</td>
         <td class="col-4">単価(税込)</td>
         <td class="col-4">数量</td>
         <td class="col-4">小計</td>
         <td class="col-4"></td>
     </tr>

     <tr>
         <td class="col-4"><%= cart_item.item.name %></td>
         <td class="col-4"><%= cart_item.item.with_tax_price %></td>
         <td class="col-4"><%=form_with model: cart_item, url: cart_item_path(cart_item.id), method: :patch do |f|%>
        <%= f.select :amount, options_for_select(0..10, {selected: cart_item.amount.to_i} )%>
        <%= f.submit '変更' ,class:"btn btn-success w-45" %>
        <% end %></td>
          <td class="col-4"><%= cart_item.subtotal %></td>
          <td class="col-4"><%= link_to '削除',cart_item_path(cart_item.id), method: :delete %></td>

     </tr>

　　<tr>
         <td class="col-4"></td>
         <td class="col-4"></td>
         <td class="col-4"></td>
         <td class="col-4"><%= cart_item.subtotal %></td>
         <td class="col-4">合計金額<% @total +=  cart_item.subtotal %></td>
     </tr>
</table>

<% end %>

<p><%= link_to '買い物を続ける', items_path, method: :get %></p>